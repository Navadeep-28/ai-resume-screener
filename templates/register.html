{% extends "base.html" %}

{% block title %}Register | AI Resume Screener{% endblock %}

{% block navbar %}
<!-- No navbar on register page -->
{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center p-6">
    <div class="w-full max-w-md bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-8 shadow-2xl shadow-black/20 animate-float">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-emerald-500/30 to-teal-500/30 rounded-2xl flex items-center justify-center border border-white/20 shadow-lg shadow-emerald-500/20">
                <!-- USER PLUS SVG ICON -->
                <svg class="w-10 h-10 text-emerald-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="8" r="4"></circle>
                    <path d="M4 20c0-3.3 3.6-6 8-6s8 2.7 8 6"></path>
                    <path d="M19 8v4M17 10h4" stroke-linecap="round"></path>
                </svg>
            </div>
            
            <h2 class="text-2xl font-bold mb-2 bg-gradient-to-r from-emerald-400 to-teal-400 bg-clip-text text-transparent">
                Register
            </h2>
            <p class="text-white/60 text-sm">
                Create HR or Admin account
            </p>
        </div>

        <!-- Error -->
        {% if error %}
            <div class="mb-6 px-4 py-3 bg-red-500/20 border border-red-400/40 rounded-xl text-red-300 text-sm text-center flex items-center justify-center gap-2">
                <svg class="w-5 h-5 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="15" y1="9" x2="9" y2="15"></line>
                    <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                {{ error }}
            </div>
        {% endif %}

        <!-- Form -->
        <form method="POST" class="space-y-4">
            
            <!-- Username Input -->
            <div class="relative">
                <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-white/40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                </div>
                <input
                    type="text"
                    name="username"
                    placeholder="Username"
                    required
                    autocomplete="username"
                    class="w-full pl-12 pr-4 py-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/40 transition duration-200 hover:bg-white/15 focus:bg-white/15 focus:border-emerald-500/50"
                >
            </div>

            <!-- âœ… NEW: Email Input -->
            <div class="relative">
                <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-white/40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                </div>
                <input
                    type="email"
                    name="email"
                    placeholder="Email Address"
                    required
                    autocomplete="email"
                    class="w-full pl-12 pr-4 py-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/40 transition duration-200 hover:bg-white/15 focus:bg-white/15 focus:border-emerald-500/50"
                >
            </div>

            <!-- Password Input -->
            <div class="relative">
                <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-white/40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                </div>
                <input
                    type="password"
                    name="password"
                    placeholder="Password"
                    required
                    autocomplete="new-password"
                    class="w-full pl-12 pr-4 py-4 bg-white/10 border border-white/20 rounded-2xl text-white placeholder-white/40 transition duration-200 hover:bg-white/15 focus:bg-white/15 focus:border-emerald-500/50"
                >
            </div>

            <!-- Role Selection -->
            <div class="relative">
                <div class="absolute inset-y-0 left-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-white/40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path>
                    </svg>
                </div>
                <select 
                    name="role"
                    class="w-full pl-12 pr-10 py-4 bg-white/10 border border-white/20 rounded-2xl text-white appearance-none cursor-pointer transition duration-200 hover:bg-white/15 focus:bg-white/15 focus:border-emerald-500/50"
                >
                    <option value="" class="bg-slate-800 text-white">HR (Default)</option>
                    <option value="admin" class="bg-slate-800 text-white">Admin</option>
                </select>
            </div>

            <!-- Role Info Badges -->
            <div class="flex gap-3 justify-center mt-2">
                <div class="flex items-center gap-2 px-3 py-1.5 bg-blue-500/10 border border-blue-400/30 rounded-full">
                    <span class="w-2 h-2 rounded-full bg-blue-400"></span>
                    <span class="text-xs text-blue-300">HR: Standard access</span>
                </div>
                <div class="flex items-center gap-2 px-3 py-1.5 bg-red-500/10 border border-red-400/30 rounded-full">
                    <span class="w-2 h-2 rounded-full bg-red-400"></span>
                    <span class="text-xs text-red-300">Admin: Full access</span>
                </div>
            </div>

            <!-- Submit Button -->
            <button 
                type="submit"
                class="w-full py-4 px-6 mt-6 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-2xl text-white font-semibold hover:opacity-90 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 shadow-lg shadow-emerald-500/25 flex items-center justify-center gap-2"
            >
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="8.5" cy="7" r="4"></circle>
                    <line x1="20" y1="8" x2="20" y2="14"></line>
                    <line x1="23" y1="11" x2="17" y2="11"></line>
                </svg>
                Create Account
            </button>
        </form>

        <!-- Footer -->
        <div class="mt-8 pt-6 border-t border-white/10 text-center">
            <p class="text-white/60 text-sm">
                Already registered?
                <a href="{{ url_for('login') }}" 
                   class="text-emerald-400 hover:text-emerald-300 font-medium transition duration-200 hover:underline underline-offset-2">
                    Login
                </a>
            </p>
        </div>

        <!-- Security Note -->
        <div class="mt-6 flex items-center justify-center gap-2 text-white/40 text-xs">
            <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
            </svg>
            <span>Your data is securely encrypted</span>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Add password strength indicator (optional enhancement)
    const passwordInput = document.querySelector('input[name="password"]');
    
    if (passwordInput) {
        passwordInput.addEventListener('input', function() {
            const password = this.value;
            let strength = 0;
            
            if (password.length >= 6) strength++;
            if (password.length >= 8) strength++;
            if (/[A-Z]/.test(password)) strength++;
            if (/[0-9]/.test(password)) strength++;
            if (/[^A-Za-z0-9]/.test(password)) strength++;
            
            // You can add visual feedback here if needed
            console.log('Password strength:', strength);
        });
    }

    // Form submission loading state
    const form = document.querySelector('form');
    const submitBtn = form?.querySelector('button[type="submit"]');
    
    if (form && submitBtn) {
        form.addEventListener('submit', function() {
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <svg class="w-5 h-5 animate-spin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" stroke-opacity="0.25"></circle>
                    <path d="M12 2a10 10 0 0 1 10 10" stroke-linecap="round"></path>
                </svg>
                Creating Account...
            `;
        });
    }
</script>
{% endblock %}
